{% extends 'base.html' %}
{% block content %}
{% if currentPage|lower == "list" %}
<div class="row">
    <h1 class="col m-3">قائمة الجالية المسجلين</h1>
    <a class="col-2 btn btn-lg {% if waiting > 0 %} btn-success {% else %} btn-secondary {% endif %} my-3"
        href="{% url 'Dashboard' 'Approve' %}" style="float: left; margin-left: 35px;">
        اعتماد السجلات الجديدة
    </a>
</div>
{% elif currentPage|lower == "approve" %}
<div class="row">
    <h1 class="col m-3">اعتماد السجلات الجديدة</h1>
    <a class="col-2 btn btn-lg btn-info my-3" href="{% url 'Dashboard' 'List' %}"
        style="float: left; margin-left: 35px;">
        رجوع
    </a>
</div>
{% endif %}

{% if page_obj %}
<div class="container-fluid">
    <table class="table text-center">
        <thead>
            <tr>
                <th scope="col">رقم</th>
                <th scope="col">الأسم</th>
                <th scope="col">المدينة</th>
                <th scope="col">الوظيفة</th>
                <th scope="col">رقم الواتس</th>
                {% if currentPage|lower == "list" %}
                <th scope="col">عضو في الجالية</th>
                {% endif %}
                <th scope="col">التفاصيل</th>
            </tr>
        </thead>
        <tbody>
            {% for person in page_obj %}
            <tr>
                <td>{{ page_obj.start_index|add:forloop.counter0 }}</td>
                <td>{{ person.name_ar }}</td>
                <td>{{ person.address.city }}</td>
                <td>{{ person.job_title }}</td>
                <td>{{ person.whatsapp_number }}</td>
                {% if currentPage|lower == "list" %}
                <td>{% if person.membership %} نعم {% else %} لا {% endif %}</td>
                {% endif %}
                <td><a class="btn btn-outline-info" href="{% url 'DetailMemberPage' person.id %}">عرض</a></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
{% if currentPage|lower == "list" %}
<h2 class="text-center text-danger">قاعدة البيانات خالية من السجلات</h2>
{% elif currentPage|lower == "approve" %}
<h2 class="text-center text-success">لا توجد سجلات جديدة لإعتمادها</h2>
{% endif %}
{% endif %}
{% endblock content %}